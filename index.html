<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Reaction–Diffusion (Gray–Scott)</title>
  <link rel="manifest" href="manifest.json?v=20251109-102614"/>
  <link rel="icon" href="icon-192.png" sizes="192x192"/>
  <link rel="apple-touch-icon" href="icon-512.png"/>
  <meta name="theme-color" content="#0f172a"/>
  <link rel="stylesheet" href="style.css?v=20251109-102614"/>
</head>
<body>
  <header>
    <h1>Reaction–Diffusion (Gray–Scott)</h1>
  </header>

  <main class="layout">
    <section class="stage-card">
      <div class="square-wrap">
        <canvas id="rd" width="512" height="512" aria-label="Reaction–Diffusion canvas"></canvas>
      </div>
      <p class="hint">💡 画面をクリック / タップすると SEED（起爆剤）を注入できます。</p>
    </section>

    <section class="panel">
      <div class="row">
        <label>解像度:</label>
        <select id="res">
          <option value="256">256</option>
          <option value="384">384</option>
          <option value="512" selected>512</option>
        </select>
        <label class="ml">速度:</label>
        <input id="speed" type="range" min="1" max="8" step="1" value="2"/>
      </div>

      <div class="row">
        <label>F:</label>
        <input id="f" type="range" min="0.01" max="0.08" step="0.001" value="0.038"/>
        <output id="fVal">0.038</output>

        <label class="ml">k:</label>
        <input id="k" type="range" min="0.03" max="0.08" step="0.001" value="0.061"/>
        <output id="kVal">0.061</output>
      </div>

      <div class="row">
        <label>Du:</label>
        <input id="du" type="range" min="0.02" max="0.3" step="0.005" value="0.16"/>
        <output id="duVal">0.160</output>

        <label class="ml">Dv:</label>
        <input id="dv" type="range" min="0.02" max="0.3" step="0.005" value="0.08"/>
        <output id="dvVal">0.080</output>

        <label class="ml">dt:</label>
        <input id="dt" type="range" min="0.25" max="1.5" step="0.05" value="1"/>
        <output id="dtVal">1.00</output>
      </div>

      <div class="row buttons">
        <button id="reset">リセット</button>
        <button id="seed">強注入</button>
        <button id="save">PNG保存</button>
      </div>

      <small class="impl">CPU実装 / クリックで SEED</small>
    </section>
  </main>

  <script src="main.js?v=20251109-102614" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', ()=>{
        navigator.serviceWorker.register('sw.js?v=20251109-102614');
      });
    }
  </script>
</body>
</html>
